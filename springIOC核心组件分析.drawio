<mxfile host="app.diagrams.net" modified="2020-06-04T03:40:10.170Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.61 Safari/537.36" etag="iHLhUFCT6ZVAbwJcpGmH" version="13.1.14" type="github">
  <diagram name="页-1" id="页-1">
    <mxGraphModel dx="1673" dy="896" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" value="连接线" parent="0" />
        <mxCell id="4" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;进入该&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;AnnotationConfigApplicationContext&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;类的&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;refresh()&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;,容器刷新,IOC容器如何创建&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;516行：&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;public void refresh()&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=123;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="729" y="276" width="430" height="87" as="geometry" />
        </mxCell>
        <mxCell id="5" style="vsdxID=130;rotation=269;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfoYUeUAsIGVRCRHRNDAzAAm4Q9TmZeXjVm+FTboCi1JA0k9FdAmQgvJGWmZMDCQW4PPF+xO8QA7yuRnEFmguADPSABwpBIs3YFQA=);labelBackgroundColor=#ffffff;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="890" y="246" width="54" height="1" as="geometry" />
        </mxCell>
        <mxCell id="6" style="vsdxID=132;rotation=180;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfmZ6hEUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1153" y="468" width="163" height="1" as="geometry" />
        </mxCell>
        <mxCell id="7" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;进入&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;prepareRefresh&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="text;vsdxID=132;rotation=0.09;fillColor=none;gradientColor=none;dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;verticalAlign=middle;align=left;strokeColor=none;;html=1;" parent="6" vertex="1">
          <mxGeometry width="163.4" as="geometry" />
        </mxCell>
        <mxCell id="8" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;进入&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;AbstractApplicationContext&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;类&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;584行prepareRefresh&lt;br/&gt;protected void prepareRefresh() {&lt;br/&gt;	this.startupDate = System.currentTimeMillis();//记录时间&lt;br/&gt;	this.closed.set(false);记录状态 当前容器关闭了吗？&lt;br/&gt;	this.active.set(true);&lt;br/&gt;		if (logger.isInfoEnabled()) {&lt;br/&gt;		logger.info(&amp;quot;Refreshing &amp;quot; + this);&lt;br/&gt;	}&lt;br/&gt;	initPropertySources();//初始化一些属性设计（此方法为空，留在子类做事情的，由子类来自定义属性设置）&lt;br/&gt;&lt;br/&gt;	getEnvironment().validateRequiredProperties();&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;//校验属性合法性&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;	this.earlyApplicationEvents = new LinkedHashSet&amp;lt;&amp;gt;();&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;//保存容器中早期的一些事件&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;}&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=134;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1316" y="286" width="642" height="286" as="geometry" />
        </mxCell>
        <mxCell id="9" style="vsdxID=135;rotation=270;fillColor=#000000;gradientColor=none;shape=stencil(lZHRDsIgDEW/po+arjXG9zn/Y8mYEBEWhlP/XrCJZjwQfbvcnja3BbiddT8pIJxj8Bd1N0PUwEcgMk6rYGJSwB1wO/qgzsHf3CDvqc9kVle/5AkP6WsOW+LcRfgUZ7NDfBsn4a1xVX5fw3GFNv9NLpMk8V1jNNbKFT7133esB8Fq6lWKIkES5eGTJZ/G3Qs=);labelBackgroundColor=#ffffff;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="891" y="390" width="54" height="1" as="geometry" />
        </mxCell>
        <mxCell id="10" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;//加了个线程安全的锁机制&lt;br/&gt;517&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;行：synchronized (this.startupShutdownMonitor) &lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;519行：prepareRefresh() //刷新前的预处理&lt;br/&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=137;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="724" y="421" width="430" height="87" as="geometry" />
        </mxCell>
        <mxCell id="11" style="vsdxID=140;rotation=270;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfmZ6FEUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);labelBackgroundColor=#ffffff;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="845" y="584" width="146" height="1" as="geometry" />
        </mxCell>
        <mxCell id="12" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;522行&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;：obtainFreshBeanFactory() //获取&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;BeanFactory；&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=141;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="724" y="660" width="430" height="37" as="geometry" />
        </mxCell>
        <mxCell id="13" style="vsdxID=149;rotation=180;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfmZ6hEUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1155" y="678" width="163" height="1" as="geometry" />
        </mxCell>
        <mxCell id="14" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;1，进入&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;refreshBeanFactory&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="text;vsdxID=149;rotation=0.09;fillColor=none;gradientColor=none;dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;verticalAlign=middle;align=left;strokeColor=none;;html=1;" parent="13" vertex="1">
          <mxGeometry width="163.4" as="geometry" />
        </mxCell>
        <mxCell id="15" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;AbstractApplicationContext&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;类&lt;br/&gt;621行&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;：refreshBeanFactory() //刷新&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;BeanFactory；&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=150;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1319" y="648" width="430" height="50" as="geometry" />
        </mxCell>
        <mxCell id="16" style="vsdxID=151;rotation=180;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfmZ6hEUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1749" y="678" width="163" height="1" as="geometry" />
        </mxCell>
        <mxCell id="17" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;进入此方法&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="text;vsdxID=151;rotation=0.09;fillColor=none;gradientColor=none;dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;verticalAlign=middle;align=left;strokeColor=none;;html=1;" parent="16" vertex="1">
          <mxGeometry width="163.4" as="geometry" />
        </mxCell>
        <mxCell id="18" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;GenericApplicationContext&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;类&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;267行&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;：this.beanFactory.setSerializationId//设置ID标识&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;110行：创建beanFactory对象（对象所有配置都为默认配置）&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=152;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1912" y="648" width="430" height="50" as="geometry" />
        </mxCell>
        <mxCell id="19" style="vsdxID=155;rotation=199;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfqZ6JJUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1149" y="728" width="182" height="1" as="geometry" />
        </mxCell>
        <mxCell id="20" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;    2，进入&lt;/font&gt;&lt;font style=&quot;font-size:16px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;getBeanFactory&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="text;vsdxID=155;rotation=19.09;fillColor=none;gradientColor=none;dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;verticalAlign=middle;align=left;strokeColor=none;;html=1;" parent="19" vertex="1">
          <mxGeometry width="182.04" as="geometry" />
        </mxCell>
        <mxCell id="21" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;AbstractApplicationContext&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;类&lt;br/&gt;622行&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;：getBeanFactory() //返回刚创建的&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;BeanFactory&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;对象&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;；&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=156;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1326" y="728" width="430" height="50" as="geometry" />
        </mxCell>
        <mxCell id="22" style="vsdxID=158;rotation=270;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfmZ6FEUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);labelBackgroundColor=#ffffff;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="850" y="771" width="146" height="1" as="geometry" />
        </mxCell>
        <mxCell id="23" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;525行&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;：prepareBeanFactory(beanFactory);//&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;BeanFactory&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;的预准备工作（&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;BeanFactory&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;进行一些设置）&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;；&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=159;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="729" y="846" width="430" height="37" as="geometry" />
        </mxCell>
        <mxCell id="24" style="vsdxID=161;rotation=180;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfmZ6hEUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1162" y="863" width="163" height="1" as="geometry" />
        </mxCell>
        <mxCell id="25" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;1，进入&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;prepareBeanFactory&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="text;vsdxID=161;rotation=0.09;fillColor=none;gradientColor=none;dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;verticalAlign=middle;align=left;strokeColor=none;;html=1;" parent="24" vertex="1">
          <mxGeometry width="163.4" as="geometry" />
        </mxCell>
        <mxCell id="26" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;AbstractApplicationContext类&lt;br/&gt;636行：setBeanClassLoader设置BeanFactory的类加载器&lt;br/&gt;637行：setBeanExpressionResolver支持表达式解析器&lt;br/&gt;&lt;br/&gt;6&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;41&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;行：添加部分BeanPostProcessor【ApplicationContextAwareProcessor】&lt;br/&gt;6&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;42&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;行：设置忽略的自动装配的接口EnvironmentAware、EmbeddedValueResolverAware、xxx；&lt;br/&gt;6&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;51&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;行：注册可以解析的自动装配；我们能直接在任何组件中自动注入：&lt;br/&gt;	BeanFactory、ResourceLoader、ApplicationEventPublisher、ApplicationContext&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;657行：&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;添加BeanPostProcessor【ApplicationListenerDetector】添加编译时的AspectJ；&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;给BeanFactory中注册一些能用的组件；&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;6&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;68&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;行：environment【ConfigurableEnvironment】、&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;环境&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;6&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;71&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;行：systemProperties【Map&amp;lt;String, Object&amp;gt;】、&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;系统属性&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;6&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;74&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;行：systemEnvironment【Map&amp;lt;String, Object&amp;gt;】&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;系统环境信息&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=162;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1326" y="795" width="594" height="285" as="geometry" />
        </mxCell>
        <mxCell id="27" style="vsdxID=173;rotation=270;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfsZ6FJUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);labelBackgroundColor=#ffffff;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="800" y="1013" width="257" height="1" as="geometry" />
        </mxCell>
        <mxCell id="28" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;529行&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;：&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;postProcessBeanFactory(b&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;eanFactory);//&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;BeanFactory&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;准备工作完成后进行的后置处理工作；方法为空；&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;子类通过重写这个方法来在BeanFactory创建并预准备完成以后做进一步的设置&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#ff0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;b&gt;注：以上是&lt;/b&gt;&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#ff0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;b&gt;BeanFactory&lt;/b&gt;&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#ff0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;b&gt;的创建及预准备工作&lt;/b&gt;&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=174;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="734" y="1143" width="430" height="111" as="geometry" />
        </mxCell>
        <mxCell id="29" style="vsdxID=177;rotation=270;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfmZ6lIUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);labelBackgroundColor=#ffffff;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="856" y="1325" width="144" height="1" as="geometry" />
        </mxCell>
        <mxCell id="30" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;532行&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;：invokeBeanFactoryPostProcessors(beanFactory);&lt;br/&gt;//执行&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;BeanFactoryPostProcessor&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;的方法&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;//&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;BeanFactoryPostProcessor：BeanFactory&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;的后置处理器。在&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;BeanFactory&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;标准初始化之后执行的&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=178;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="734" y="1399" width="430" height="76" as="geometry" />
        </mxCell>
        <mxCell id="31" style="vsdxID=180;rotation=270;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfoYGeqSFIl5FBJURE18TAACzgBlGfk5mHV70ZPuUGKEoNSTMZ3SVABsIbaZk5OZBQgMsT70cCDsHrahRXoLkAyEAPeKAQJNKMXQE=);labelBackgroundColor=#ffffff;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="877" y="1523" width="95" height="1" as="geometry" />
        </mxCell>
        <mxCell id="32" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;532行&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;：invokeBeanFactoryPostProcessors(beanFactory);&lt;br/&gt;//执行&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;BeanFactoryPostProcessor&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;的方法&lt;br/&gt;//&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;BeanFactoryPostProcessor：BeanFactory&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;的后置处理器。在&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;BeanFactory&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;标准初始化之后执行的,&lt;br/&gt;CTRL+T打开此类,&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;两个接口方法:&lt;br/&gt;BeanFactoryPostProcessor接口, BeanDefinitionRegistryPostProcessor子接口:具有最高的优先级,以前用过给容器中添加组件的, 跟进此方法会讲到&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=181;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="735" y="1573" width="430" height="164" as="geometry" />
        </mxCell>
        <mxCell id="33" style="vsdxID=182;rotation=180;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfmZ6hEUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1163" y="1658" width="163" height="1" as="geometry" />
        </mxCell>
        <mxCell id="34" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;跟进invokeBeanFactoryPostProcessors&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="text;vsdxID=182;rotation=0.09;fillColor=none;gradientColor=none;dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;verticalAlign=middle;align=left;strokeColor=none;;html=1;" parent="33" vertex="1">
          <mxGeometry width="163.4" as="geometry" />
        </mxCell>
        <mxCell id="35" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;AbstractApplicationContext&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;类&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;694&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;行：PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;//执行BeanFactoryProcessorr的方法,跟进此方法&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=183;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1327" y="1628" width="430" height="50" as="geometry" />
        </mxCell>
        <mxCell id="36" style="vsdxID=185;rotation=133;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfiZ6hJUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1717" y="1567" width="238" height="1" as="geometry" />
        </mxCell>
        <mxCell id="37" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;/p&gt;" style="text;vsdxID=185;rotation=313.09;fillColor=none;gradientColor=none;dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;verticalAlign=middle;align=left;strokeColor=none;;html=1;" parent="36" vertex="1">
          <mxGeometry x="-1" width="238.88" as="geometry" />
        </mxCell>
        <mxCell id="38" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;PostProcessorRegistrationDelegate类&lt;br/&gt;59行：if (beanFactory instanceof BeanDefinitionRegistry) {//先判断beanFactory 是不是BeanDefinitionRegistry类型&lt;br/&gt;		for (BeanFactoryPostProcessor postProcessor : beanFactoryPostProcessors) {&lt;br/&gt;			&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#3f7f5f;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;//第一次进来无数据可遍历&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;			&lt;br/&gt;		}&lt;br/&gt;     }&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:15px;font-family:Consolas;color:#ff0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;b&gt;A&amp;gt;&lt;/b&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;先执行实现了&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#ff0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;PriorityOrdered&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;优先级接口的BeanDefinitionRegistryPostProcessor、&lt;br/&gt;            postProcessor.postProcessBeanDefinitionRegistry(registry)&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;       &lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#3f7f5f;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;//First&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt; 获取所有的&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#ff0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;BeanDefinitionRegistryPostProcessor&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#ff0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt; &lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;83行:	String[] postProcessorNames = beanFactory.getBeanNamesForType(&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#ff0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;BeanDefinitionRegistryPostProcessor&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#ff0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt; &lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;….);&lt;br/&gt;		for (String ppName : postProcessorNames) {&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt; &lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#3f7f5f;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;//遍历所有DefinitionRgPostProcessor&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;			if (beanFactory.isTypeMatch(ppName, PriorityOrdered.class)) {&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#3f7f5f;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;//是不是实现了PriorityOrder接口&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;				currentRegistryProcessors.add(beanFactory.getBean(ppName...));&lt;br/&gt;				processedBeans.add(ppName);&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;//processed表示存储被处理过的&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;			}&lt;br/&gt;		}&lt;br/&gt;		sortPostProcessors(currentRegistryProcessors, beanFactory);&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#3f7f5f;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;//优先级进行排序&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;		registryProcessors.addAll(currentRegistryProcessors);&lt;br/&gt;93行:		invokeBeanDefinitionRegistryPostProcessors(currentRegistryProcessors, registry);&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#3f7f5f;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;//进行执行&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;		&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#3f7f5f;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;//执行内容为:&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;94行		currentRegistryProcessors.clear();&lt;br/&gt;&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:15px;font-family:Consolas;color:#FF0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;b&gt;B&amp;gt;&lt;/b&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;在执行实现了&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#ff0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;Ordered&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;顺序接口的&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#ff0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;BeanDefinitionRegistryPostProcessor&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;；&lt;br/&gt;		postProcessor.postProcessBeanDefinitionRegistry(registry)&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;	&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#3f7f5f;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;// Next 在执行实现了Ordered顺序接口的BeanDefinitionRegistryPostProcessor&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;97&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;行&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;:&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;postProcessorNames = beanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor.class, true, false);&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:16px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:15px;font-family:Consolas;color:#FF0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;b&gt;C&amp;gt;&lt;/b&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;最后执行没有实现任何优先级或者是顺序接口的&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#ff0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;b&gt;BeanDefinitionRegistryPostProcessors&lt;/b&gt;&lt;/font&gt;&lt;font style=&quot;font-size:16px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;	&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#3f7f5f;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;// Finally,	后执行没有实现任何优先级或者是顺序接口的BeanDefinitionRegistryPostProcessors	&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;110行:boolean reiterate = true;&lt;br/&gt;113行:postProcessorNames = beanFactory.getBeanNamesForType(BeanDefinitionRegistryPostProcessor&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#FF0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:16px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;b&gt;注:&lt;/b&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;当&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#ff0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;b&gt;BeanDefinitionRegistryPostProcessors&lt;/b&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;执行完后(最高优先级),再执行&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;BeanFactoryPostProcessor&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;的方法,逻辑一模一样&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=186;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1919" y="1188" width="822" height="583" as="geometry" />
        </mxCell>
        <mxCell id="39" style="vsdxID=206;rotation=270;fillColor=#000000;gradientColor=none;shape=stencil(lZHdDsIgDIWfppeaShdeYM73WDI2iAgLw7+3F2zUjESid4fTr81pAWoX3c8KBC4x+KO6miFqoD0IYZxWwcSkgDqgdvRBTcGf3cDvuc9kVid/yRNu3Ce3UuYmgXc2Ng3i0zgwbo2r4bJG4wrd/TW4zJHEZ4fRWMsneNd/XrAa41X8Aq9CFAGSKI+eLP4w6h4=);labelBackgroundColor=#ffffff;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="850" y="1813" width="150" height="1" as="geometry" />
        </mxCell>
        <mxCell id="40" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;535行&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;：&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;registerBeanPostProcessors&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;(beanFactory);&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;//注册&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;BeanPostProcessor（Bean&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;的后置处理器）&lt;br/&gt;【 &lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;intercept bean creation】&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;拦截bean创建过程&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=207;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="735" y="1888" width="430" height="86" as="geometry" />
        </mxCell>
        <mxCell id="41" style="vsdxID=209;rotation=180;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfmZ6hEUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1171" y="1929" width="163" height="1" as="geometry" />
        </mxCell>
        <mxCell id="42" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;跟进&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;registerBeanPostProcessors&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="text;vsdxID=209;rotation=0.09;fillColor=none;gradientColor=none;dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;verticalAlign=middle;align=left;strokeColor=none;;html=1;" parent="41" vertex="1">
          <mxGeometry width="163.4" as="geometry" />
        </mxCell>
        <mxCell id="43" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;PostProcessorRegistrationDelegate类&lt;br/&gt;189行：String[] postProcessorNames = beanFactory.getBeanNamesForType(BeanPostProcessor&lt;br/&gt;      //获取所有后置处理器&lt;br/&gt;1）、获取所有的 BeanPostProcessor;后置处理器都默认可以通过PriorityOrdered、Ordered接口来执行优先级&lt;br/&gt;     //221行 &lt;/font&gt;&lt;font style=&quot;font-size:16px;font-family:Consolas;color:#FF0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;u&gt;priorityOrderedPostProcessors&lt;/u&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;2）、先注册PriorityOrdered优先级接口的BeanPostProcessor；&lt;br/&gt;	把每一个BeanPostProcessor；添加到BeanFactory中&lt;br/&gt;	beanFactory.addBeanPostProcessor(postProcessor);&lt;br/&gt;     //233行 &lt;/font&gt;&lt;font style=&quot;font-size:16px;font-family:Consolas;color:#ff0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;u&gt;orderedPostProcessors&lt;/u&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;3）、再注册Ordered接口的&lt;br/&gt;4）、最后注册没有实现任何优先级接口的&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;5）、最终注册MergedBeanDefinitionPostProcessor；&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#3f7f5f;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;//MergedBeanDefinitionPostProcessor则是在合并处理Bean定义的时候的回调。也基本是框架内部使用的，不用管&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;6）、注册一个ApplicationListenerDetector；来在Bean创建完成后检查是否是ApplicationListener，如果是&lt;br/&gt;	applicationContext.addApplicationListener((ApplicationListener&amp;lt;?&amp;gt;) bean);&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=210;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1335" y="1807" width="662" height="297" as="geometry" />
        </mxCell>
        <mxCell id="44" style="vsdxID=217;rotation=270;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfsZ6lEUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);labelBackgroundColor=#ffffff;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="804" y="2102" width="254" height="1" as="geometry" />
        </mxCell>
        <mxCell id="45" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;538行&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;：initMessageSource();&lt;br/&gt;   //初始化&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;MessageSource&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;组件（做国际化功能；消息绑定，消息解析）&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=218;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="737" y="2230" width="430" height="86" as="geometry" />
        </mxCell>
        <mxCell id="46" style="vsdxID=221;rotation=180;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfmZ6hEUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1169" y="2280" width="163" height="1" as="geometry" />
        </mxCell>
        <mxCell id="47" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;跟进&lt;br/&gt;initMessageSource&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="text;vsdxID=221;rotation=0.09;fillColor=none;gradientColor=none;dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;verticalAlign=middle;align=left;strokeColor=none;;html=1;" parent="46" vertex="1">
          <mxGeometry width="163.4" as="geometry" />
        </mxCell>
        <mxCell id="48" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;AbstractApplicationContext类&lt;br/&gt;718行：ConfigurableListableBeanFactory beanFactory = getBeanFactory();//获取BeanFactory&lt;br/&gt;      //判断工厂是否存在messageSource&lt;br/&gt;719行:if (beanFactory.containsLocalBean(MESSAGE_SOURCE_BEAN_NAME))&lt;br/&gt;      //如果存在messageSource,把这个组件拿过来赋值为this.messageSource&lt;br/&gt;720行:this.messageSource = beanFactory.getBean(MESSAGE_SOURCE_BEAN_NAME, MessageSource.class);&lt;br/&gt;&lt;br/&gt;      //如果不存在,自己创建一个&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;DelegatingMessageSource&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;736行:DelegatingMessageSource dms = new DelegatingMessageSource();&lt;br/&gt;&lt;br/&gt;点进MessageSource.class源码:&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;57行:String getMessage(code,  Object[] args,  defaultMessage, Locale locale);&lt;br/&gt;//从properties中信息读取,取出国际化配置文件中的某个&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;key&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;的值；能按照区域信息&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;locale&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;获取&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=222;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1332" y="2162" width="688" height="229" as="geometry" />
        </mxCell>
        <mxCell id="49" style="vsdxID=234;rotation=270;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfsZ6lEUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);labelBackgroundColor=#ffffff;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="806" y="2445" width="254" height="1" as="geometry" />
        </mxCell>
        <mxCell id="50" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;541行&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;：&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;initApplicationEventMulticaster&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;();&lt;br/&gt;      //初始化事件派发器；&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=235;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="739" y="2573" width="430" height="86" as="geometry" />
        </mxCell>
        <mxCell id="51" style="vsdxID=236;rotation=180;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfmZ6hEUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1169" y="2623" width="163" height="1" as="geometry" />
        </mxCell>
        <mxCell id="52" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;跟进&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;initApplicationEventMulticaster&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="text;vsdxID=236;rotation=0.09;fillColor=none;gradientColor=none;dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;verticalAlign=middle;align=left;strokeColor=none;;html=1;" parent="51" vertex="1">
          <mxGeometry width="163.4" as="geometry" />
        </mxCell>
        <mxCell id="53" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;AbstractApplicationContext类(了解即可)&lt;br/&gt;753行：ConfigurableListableBeanFactory beanFactory = getBeanFactory();//获取BeanFactory&lt;br/&gt;      //判断工厂是否存在&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;applicationEventMulticaster&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;的&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;applicationEventMulticaster&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;754行:if (beanFactory.containsLocalBean(APPLICATION_EVENT_MULTICASTER_BEAN_NAME))&lt;br/&gt;      //如果存在applicationEventMulticaster,把这个组件拿过来赋值为this.applicationEventMulticaster&lt;br/&gt;755行:this.applicationEventMulticaster= beanFactory.getBean(&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;i&gt;APPLICATION_EVENT_MULTICASTER_BEAN_NAME&lt;/i&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;, ApplicationEventMulticaster.class);&lt;br/&gt;&lt;br/&gt;      //如果不存在,自己创建一个&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;DelegatingMessageSource&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;762行&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;:this.applicationEventMulticaster = new SimpleApplicationEventMulticaster(beanFactory)&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=237;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1332" y="2505" width="688" height="229" as="geometry" />
        </mxCell>
        <mxCell id="54" style="vsdxID=248;rotation=270;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfuZ6FIUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);labelBackgroundColor=#ffffff;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="869" y="2725" width="128" height="1" as="geometry" />
        </mxCell>
        <mxCell id="55" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;544行：onrefresh();//空方法&lt;br/&gt;      //留给子容器（子类）；&lt;br/&gt;子类重写这个方法，在容器刷新的时候可以自定义逻辑；&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=249;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="739" y="2793" width="430" height="86" as="geometry" />
        </mxCell>
        <mxCell id="56" style="vsdxID=250;rotation=270;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfuZ6FIUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);labelBackgroundColor=#ffffff;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="869" y="2944" width="128" height="1" as="geometry" />
        </mxCell>
        <mxCell id="57" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;544行：&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;registerListeners();&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;      将容器中将所有项目里面的&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;ApplicationListener&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;注册进来&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=251;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="739" y="3012" width="430" height="86" as="geometry" />
        </mxCell>
        <mxCell id="58" style="vsdxID=252;rotation=180;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfmZ6hEUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1171" y="3052" width="163" height="1" as="geometry" />
        </mxCell>
        <mxCell id="59" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;跟进&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;registerListeners&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="text;vsdxID=252;rotation=0.09;fillColor=none;gradientColor=none;dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;verticalAlign=middle;align=left;strokeColor=none;;html=1;" parent="58" vertex="1">
          <mxGeometry width="163.4" as="geometry" />
        </mxCell>
        <mxCell id="60" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;AbstractApplicationContext类(了解即可)&lt;br/&gt;816行：&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;for (ApplicationListener&amp;lt;?&amp;gt; listener : getApplicationListeners()) {&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;//从事件派发器中拿到监听&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;		getApplicationEventMulticaster().addApplicationListener(listener);&lt;br/&gt;	}&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;br/&gt;822行&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;:&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;  //或直接从容器中拿到所有监听&lt;br/&gt;       String[] listenerBeanNames = getBeanNamesForType(ApplicationListener.class, true, false);&lt;br/&gt;	for (String listenerBeanName : listenerBeanNames) {&lt;br/&gt;		//将每个监听器添加到事件派发器中&lt;br/&gt;		getApplicationEventMulticaster().addApplicationListenerBean(listenerBeanName);&lt;br/&gt;	}&lt;br/&gt;833行: //派发之前步骤产生的事件&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;getApplicationEventMulticaster().multicastEvent(earlyEvent);&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=253;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1334" y="2934" width="688" height="229" as="geometry" />
        </mxCell>
        <mxCell id="61" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;进入AbstractApplicationContext类&lt;br/&gt;841行 finishBeanFactoryInitialization()&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;//将所有单实例bean创建,此方法内容较从,我们可以看AOP组件Viso图的最后一部分是它的详细描述&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=254;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="734" y="3228" width="430" height="120" as="geometry" />
        </mxCell>
        <mxCell id="62" style="vsdxID=255;rotation=270;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfuZ6FIUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);labelBackgroundColor=#ffffff;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="865" y="3164" width="128" height="1" as="geometry" />
        </mxCell>
        <mxCell id="63" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;进入AbstractApplicationContext类&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;553&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;行 finish&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;Refresh&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;(&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;)//完成BeanFactory的初始化创建工作；IOC容器就创建完成(其实IOC容器在上一步就已经完成了..)&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=256;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="729" y="3476" width="430" height="120" as="geometry" />
        </mxCell>
        <mxCell id="64" style="vsdxID=257;rotation=270;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfuZ6FIUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);labelBackgroundColor=#ffffff;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="865" y="3412" width="128" height="1" as="geometry" />
        </mxCell>
        <mxCell id="65" style="vsdxID=259;rotation=180;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfmZ6hEUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1163" y="3536" width="163" height="1" as="geometry" />
        </mxCell>
        <mxCell id="66" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;跟进&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;finish&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;Refresh&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;(&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;)&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="text;vsdxID=259;rotation=0.09;fillColor=none;gradientColor=none;dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;verticalAlign=middle;align=left;strokeColor=none;;html=1;" parent="65" vertex="1">
          <mxGeometry width="163.4" as="geometry" />
        </mxCell>
        <mxCell id="67" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;AbstractApplicationContext类&lt;br/&gt;879行：clearResourceCaches()//清除环境级别的缓存&lt;br/&gt;882行:initLifecycleProcessor();//初始化与生命周期有关的后置处理器,见右&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#ff0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;b&gt;A&lt;/b&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;箭头&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;885行:getLifecycleProcessor().onRefresh()拿到上面定义的生命周期处理器,回调onRefresh();&lt;br/&gt;888行:publishEvent(..)//发布容器刷新完成事件；&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;891行:LiveBeansView.registerApplicationContext(this)//暴露一些Mbean之类,不用关心&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=260;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="1326" y="3460" width="688" height="148" as="geometry" />
        </mxCell>
        <mxCell id="68" style="vsdxID=263;rotation=180;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfqZ6pGUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="2015" y="3538" width="180" height="1" as="geometry" />
        </mxCell>
        <mxCell id="69" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;A&lt;br/&gt;&lt;/font&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;initLifecycleProcessor()&lt;/font&gt;&lt;font style=&quot;font-size:14px;font-family:Consolas;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="text;vsdxID=263;rotation=0.09;fillColor=none;gradientColor=none;dashed=1;dashPattern=2.00 2.00;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;verticalAlign=middle;align=left;strokeColor=none;;html=1;" parent="68" vertex="1">
          <mxGeometry width="180" as="geometry" />
        </mxCell>
        <mxCell id="70" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;AbstractApplicationContext类&lt;br/&gt;780行：this.lifecycleProcessor = beanFactory.getBean()//从bean工厂允许定义一个LifecycleProcessor实现,在IOC容器的生命周期期间进行拦截(onRefresh, onClose()),默认从容器中找是否有lifecycleProcessor的组件【LifecycleProcessor】；&lt;br/&gt;787行:如果没有new DefaultLifecycleProcessor();了解即可&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:12px;font-family:Consolas;color:#6a3e3e;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=264;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="2195" y="3458" width="688" height="160" as="geometry" />
        </mxCell>
        <mxCell id="71" value="&lt;p style=&quot;align:left;margin-left:0;margin-right:0;margin-top:0px;margin-bottom:0px;text-indent:0;valign:middle;direction:ltr;&quot;&gt;&lt;font style=&quot;font-size:11px;font-family:Consolas;color:#3f5fbf;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;======总结===========&lt;br/&gt;	1）、Spring容器在启动的时候，先会保存所有注册进来的Bean的定义信息；&lt;br/&gt;		1）、xml注册bean；&amp;lt;bean&amp;gt;&lt;br/&gt;		2）、注解注册Bean；@Service、@Component、@Bean、xxx&lt;br/&gt;	2）、Spring容器会合适的时机创建这些Bean&lt;br/&gt;		1）、用到这个bean的时候；利用getBean创建bean；创建好以后保存在容器中；&lt;br/&gt;		2）、统一创建剩下所有的bean的时候；finishBeanFactoryInitialization()；&lt;br/&gt;	3）、后置处理器；BeanPostProcessor&lt;br/&gt;		1）、每一个bean创建完成，都会使用各种后置处理器进行处理；来增强bean的功能；&lt;br/&gt;			AutowiredAnnotationBeanPostProcessor:处理自动注入&lt;br/&gt;			AnnotationAwareAspectJAutoProxyCreator:来做AOP功能；&lt;br/&gt;			xxx....&lt;br/&gt;			增强的功能注解：&lt;br/&gt;			AsyncAnnotationBeanPostProcessor&lt;br/&gt;			....&lt;br/&gt;	4）、事件驱动模型；&lt;br/&gt;		ApplicationListener；事件监听；&lt;br/&gt;		ApplicationEventMulticaster；事件派发：&lt;/font&gt;&lt;font style=&quot;font-size:11px;font-family:Calibri;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;br/&gt;&lt;/font&gt;&lt;/p&gt;" style="verticalAlign=middle;align=left;vsdxID=273;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="650" y="3726" width="569" height="288" as="geometry" />
        </mxCell>
        <mxCell id="72" style="vsdxID=274;rotation=270;fillColor=#000000;gradientColor=none;shape=stencil(UzV2Ls5ILEhVNTIoLinKz04tz0wpyVA1dlE1MsrMy0gtyiwBslSNXVWNndPyi1LTi/JL81Ig/IJEkEoQKze/DGRCBUSfuZ6FIUiTkUElREDXxMAALOAGUZ6TmYdPuRk+1QYoSg1JMhjdHUAGwg9pmTk5kCCAyxPtQbzOgEniUIziCDQHABnogQ4UgkSYsSsA);labelBackgroundColor=#ffffff;rounded=0;html=1;whiteSpace=wrap;" parent="1" vertex="1">
          <mxGeometry x="870" y="3662" width="128" height="1" as="geometry" />
        </mxCell>
        <mxCell id="73" value="&lt;font style=&quot;font-size:14px;font-family:SimSun;color:#ff0000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;&lt;b&gt;IOC总结&lt;br/&gt;&lt;/b&gt;&lt;/font&gt;" style="text;vsdxID=274;rotation=359.95;fillColor=none;gradientColor=none;labelBackgroundColor=#ffffff;rounded=0;html=1;whiteSpace=wrap;verticalAlign=middle;align=center;strokeColor=none;;html=1;" parent="72" vertex="1">
          <mxGeometry width="128" as="geometry" />
        </mxCell>
        <mxCell id="2" value="流程图" parent="0" />
        <mxCell id="3" value="&lt;font style=&quot;font-size:14px;font-family:SimSun;color:#000000;direction:ltr;letter-spacing:0px;line-height:120%;opacity:1&quot;&gt;IOC初始化流程&lt;br/&gt;&lt;/font&gt;" style="verticalAlign=middle;align=center;vsdxID=118;fillColor=#FFFFFF;gradientColor=none;shape=stencil(nZBLDoAgDERP0z3SIyjew0SURgSD+Lu9kMZoXLhwN9O+tukAlrNpJg1SzDH4QW/URgNYgZTkjA4UkwJUgGXng+6DX1zLfmoymdXo17xh5zmRJ6Q42BWCfc2oJfdAr+Yv+AP9Cb7OJ3H/2JG1HNGz/84klThPVCc=);strokeColor=#000000;spacingTop=-1;spacingBottom=-1;spacingLeft=-1;spacingRight=-1;labelBackgroundColor=none;rounded=0;html=1;whiteSpace=wrap;" parent="2" vertex="1">
          <mxGeometry x="729" y="182" width="430" height="36" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
